@page
@model Fall2025_Project3_jppierre.Pages.Movies.IndexModel

@{
    ViewData["Title"] = "Movies";
}

<h1>Movies</h1>

<p>
    <a asp-page="Create" class="btn btn-primary">Create new movie</a>
</p>
<table class="table table-striped">
    <thead>
      <tr>
      <th>Poster</th>
 <th>
    @Html.DisplayNameFor(model => model.Movies[0].Title)
   </th>
  <th>
     @Html.DisplayNameFor(model => model.Movies[0].Genre)
    </th>
        <th>
@Html.DisplayNameFor(model => model.Movies[0].ReleaseYear)
   </th>
      <th>
@Html.DisplayNameFor(model => model.Movies[0].IMDBLink)
  </th>
 <th>Actions</th>
 </tr>
    </thead>
  <tbody>
@foreach (var item in Model.Movies) {
        <tr>
  <td>
    @if (item.Poster != null && item.Poster.Length > 0)
{
     <img src="data:image/jpeg;base64,@Convert.ToBase64String(item.Poster)" 
     alt="Poster" 
     style="max-width: 50px; max-height: 75px; object-fit: cover;" 
   class="rounded" />
     }
   else
      {
 <span class="text-muted">No poster</span>
   }
    </td>
      <td>
     @Html.DisplayFor(modelItem => item.Title)
      </td>
     <td>
       @Html.DisplayFor(modelItem => item.Genre)
   </td>
 <td>
     @Html.DisplayFor(modelItem => item.ReleaseYear)
  </td>
 <td>
     @if (!string.IsNullOrEmpty(item.IMDBLink))
       {
    <a href="@item.IMDBLink" target="_blank">IMDB</a>
}
      </td>
  <td>
  <a asp-page="./Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning">Edit</a>
  <a asp-page="./Details" asp-route-id="@item.Id" class="btn btn-sm btn-info">Details</a>
 <a asp-page="./Delete" asp-route-id="@item.Id" class="btn btn-sm btn-danger">Delete</a>
     </td>
        </tr>
}
    </tbody>
</table>
